## ----------------------------------------------------------------------------
## celine-rec-registry â€” values.yaml
## ----------------------------------------------------------------------------

fullnameOverride: rec-registry

image:
  repository: ghcr.io/celine-eu/celine-rec-registry
  tag: "latest"
  pullPolicy: IfNotPresent

replicaCount: 1

service:
  type: ClusterIP
  port: 8004

ingress:
  enabled: true
  domain: celine.local
  host: "rec-registry.celine.local"
  issuer: celine-tls
  auth:
    enabled: true
  tls:
    enabled: true
    secretName: ""
  annotations: {}

oidc:
  baseUrl: "http://keycloak/realms/celine"
  jwksUri: "http://keycloak/realms/celine/protocol/openid-connect/certs"
  allowedAudiences: ""
  includeClientIdAsAudience: true
  timeout: 10.0
  service:
    clientId: "svc-celine-rec-registry"
    audience: "svc-celine-rec-registry"
    clientSecret: "svc-celine-rec-registry" # [secret]

policies:
  dir: "/app/policies"
  dataDir: ""
  cacheEnabled: true
  cacheTtl: 300
  cacheMaxsize: 10000

postgres:
  existingSecret: "postgis1-rec-registry-connection-string"
  dsnEnvVar: "DATABASE_URL"
  secretKey: "connection-string"

s3:
  endpointUrl: ""
  region: "us-east-1"
  existingSecret: ""

migrate:
  enabled: true
  command: ["alembic", "upgrade", "head"]
  extraEnv: []

healthCheck:
  enabled: true
  path: /health
  initialDelaySeconds: 10
  periodSeconds: 30
  failureThreshold: 3

configMap:
  enabled: false
  name: ""
  mountPath: /app/config
  data: {}

volumeMounts: []
volumes: []

logLevel: "INFO"
extraEnv:
  - name: REC_REGISTRY_URL
    value: http://celine-rec-registry:8004

extraSecrets: {}

podAnnotations: {}
podSecurityContext:
  runAsUser: 1000
resources: {}
nodeSelector: {}
tolerations: []
affinity: {}
